<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Interactiva – Ingeniería en Telecomunicaciones</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        text-align: center;
    }
    h1 {
        margin-top: 20px;
    }
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 10px;
        padding: 20px;
    }
    .materia {
        border-radius: 8px;
        padding: 10px;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    .materia small {
        display: block;
        font-size: 0.8em;
        color: rgba(255, 255, 255, 0.8);
    }
    .bloqueada {
        background-color: #ccc !important;
        color: #666 !important;
        cursor: not-allowed;
    }
    .aprobada {
        text-decoration: line-through;
        opacity: 0.5;
    }
</style>
</head>
<body>

<h1>Malla Interactiva – Ingeniería en Telecomunicaciones</h1>
<div class="grid" id="malla"></div>

<script>
const materias = [
    { id: 1, nombre: "Álgebra Lineal", horas: 144, creditos: 3, area: "Unidad Básica", color: "#4CAF50", prereqs: [] },
    { id: 2, nombre: "Cálculo Diferencial", horas: 160, creditos: 4, area: "Unidad Básica", color: "#4CAF50", prereqs: [] },
    { id: 3, nombre: "Física I", horas: 160, creditos: 4, area: "Unidad Básica", color: "#2196F3", prereqs: [1,2] },
    { id: 4, nombre: "Programación I", horas: 144, creditos: 3, area: "Unidad Básica", color: "#FF9800", prereqs: [] },
    { id: 5, nombre: "Circuitos Eléctricos I", horas: 160, creditos: 4, area: "Profesional", color: "#9C27B0", prereqs: [3] },
    { id: 6, nombre: "Electrónica I", horas: 160, creditos: 4, area: "Profesional", color: "#9C27B0", prereqs: [5] },
];

let aprobadas = JSON.parse(localStorage.getItem("aprobadas")) || [];

function renderMalla() {
    const contenedor = document.getElementById("malla");
    contenedor.innerHTML = "";
    materias.forEach(m => {
        const div = document.createElement("div");
        div.classList.add("materia");
        div.style.backgroundColor = m.color;

        const requisitosCumplidos = m.prereqs.every(pr => aprobadas.includes(pr));
        const aprobada = aprobadas.includes(m.id);

        if (!requisitosCumplidos && !aprobada) {
            div.classList.add("bloqueada");
        }

        if (aprobada) {
            div.classList.add("aprobada");
        }

        div.innerHTML = `
            <strong>${m.nombre}</strong>
            <small>${m.horas} horas – ${m.creditos} créditos</small>
        `;

        if (requisitosCumplidos || aprobada) {
            div.addEventListener("click", () => toggleAprobada(m.id));
        }

        contenedor.appendChild(div);
    });
}

function toggleAprobada(id) {
    if (aprobadas.includes(id)) {
        aprobadas = aprobadas.filter(m => m !== id);
    } else {
        aprobadas.push(id);
    }
    localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
    renderMalla();
}

renderMalla();
</script>

</body>
</html>
